{% load i18n design editor code humanize %}
<div class="card block">
    <header class="card-header has-background-ai-transformer-dark has-text-text-invert">
        <p class="card-header-title has-text-text-invert">
            {% translate "Retry Counts" %}
        </p>
        <p class="card-header-icon">
            <i class="fas fa-arrow-rotate-left"></i>
        </p>
    </header>
    <div class="card-content">
        <div class="field is-horizontal">
            <div class="field-label is-normal">
                <label class="label" for="ai_retry_count_on_failure">{% translate "On Failure" %}</label>
            </div>
            <div class="field-body">
                <div class="field">
                    <div class="control">
                        <input id="ai_retry_count_on_failure" name="ai_retry_count_on_failure" class="input" type="number" value="{{ settings.retry_count_on_failure }}">
                    </div>
                    <p class="help">
                        {% blocktranslate %}
                            The number of times the same request is sent again if the transformation fails. This makes only
                            sense for non-deterministic models, where each reply is different.
                        {% endblocktranslate %}
                    </p>
                </div>
            </div>
        </div>
        
        <div class="field is-horizontal">
            <div class="field-label is-normal">
                <label class="label" for="ai_retry_count_on_technical">{% translate "On Technical Problems" %}</label>
            </div>
            <div class="field-body">
                <div class="field">
                    <div class="control">
                        <input id="ai_retry_count_on_technical" name="ai_retry_count_on_technical" class="input" type="number" value="{{ settings.retry_count_on_technical }}">
                    </div>
                    <p class="help">
                        {% blocktranslate %}
                            How many times the same request is retried on any technical errors, like network errors or errors
                            from the API (limits, outages, etc.)
                        {% endblocktranslate %}
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="field is-horizontal">
    <div class="field-label">
        <label class="label" for="ai_force_json_format">{% translate "Force JSON Format" %}</label>
    </div>
    <div class="field-body">
        <div class="control">
            <label class="checkbox">
                <input type="checkbox" id="ai_force_json_format" name="ai_force_json_format" {% if settings.force_json_format %}checked{% endif %}>
                {% translate "Force JSON format for the result" %}
            </label>
        </div>
    </div>
</div>
